System.register("chunks:///_virtual/AreaBackground.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var r,e,n,o;return{setters:[function(t){r=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator,o=t.Component}],execute:function(){var c;e._RF.push({},"7be4d1RpVZKWbtWn1OGtTUY","AreaBackground",void 0);var u=n.ccclass;n.property,t("AreaBackground",u("AreaBackground")(c=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.start=function(){this.node.active=!1},n.update=function(t){},e}(o))||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/BodyGroups.ts",["cc"],(function(e){"use strict";var u;return{setters:[function(e){u=e.cclegacy}],execute:function(){var r;e("BodyGroup",void 0),u._RF.push({},"edc291aePBNDoAusuf9ikKt","BodyGroups",void 0),function(e){e[e.SelectableTile=1]="SelectableTile",e[e.GroundTile=2]="GroundTile",e[e.GridTile=4]="GridTile",e[e.Cluster=8]="Cluster"}(r||(r=e("BodyGroup",{}))),u._RF.pop()}}}));

System.register("chunks:///_virtual/CollisionHandler.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GroundTile.ts","./SelectableTiles.ts","./GridManager.ts"],(function(n){"use strict";var o,i,e,t,l,r,s,d;return{setters:[function(n){o=n.inheritsLoose},function(n){i=n.cclegacy,e=n._decorator,t=n.Collider,l=n.Component},function(n){r=n.GroundTile},function(n){s=n.SelectableTiles},function(n){d=n.GridManager}],execute:function(){var c;i._RF.push({},"61c1ed8j1xKfZQk7WCq/cKv","CollisionHandler",void 0);var a=e.ccclass;n("CollisionHandler",a("CollisionHandler")(c=function(n){function i(){for(var o,i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return(o=n.call.apply(n,[this].concat(e))||this).collidedGroundTile=null,o}o(i,n);var e=i.prototype;return e.onEnable=function(){var n=this.node.getComponent(t);n&&(n.on("onCollisionEnter",this.onCollisionEnter,this),n.on("onCollisionExit",this.onCollisionExit,this))},e.onDisable=function(){var n=this.getComponentInChildren(t);n&&(n.off("onCollisionEnter",this.onCollisionEnter,this),n.off("onCollisionExit",this.onCollisionExit,this))},e.onCollisionEnter=function(n){var o=n.otherCollider.node.getComponent(r);if(o){this.collidedGroundTile=o;var i=this.node.getComponent(s);i&&(d.getInstance().resetHighlight(),this.collidedGroundTile.highlight(!0),i.attachedGround=this.collidedGroundTile)}},e.onCollisionExit=function(n){var o=n.otherCollider.node.getComponent(r);if(o&&this.collidedGroundTile===o){var i=this.node.getComponent(s);d.getInstance().resetHighlight(),this.collidedGroundTile=null,i&&(i.attachedGround=this.collidedGroundTile)}},i}(l))||c);i._RF.pop()}}}));

System.register("chunks:///_virtual/ColorProvider.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var r,o,n,t,i,l,c,a,u;return{setters:[function(e){r=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,t=e.assertThisInitialized},function(e){i=e.cclegacy,l=e._decorator,c=e.director,a=e.Color,u=e.Component}],execute:function(){var s,f,p,h,d,b,g,y,v,C,w;i._RF.push({},"827d967CyVIx6bYlbYhkMwR","ColorProvider",void 0);var m=l.ccclass,z=l.property;e("ColorProvider",m("ColorProvider")(((w=function(e){function r(){for(var r,o=arguments.length,i=new Array(o),l=0;l<o;l++)i[l]=arguments[l];return r=e.call.apply(e,[this].concat(i))||this,n(r,"color1",p,t(r)),n(r,"color2",h,t(r)),n(r,"color3",d,t(r)),n(r,"color4",b,t(r)),n(r,"color5",g,t(r)),n(r,"color6",y,t(r)),n(r,"ground",v,t(r)),n(r,"highlight",C,t(r)),r}o(r,e);var i=r.prototype;return i.onLoad=function(){null===r._instance?(r._instance=this,c.addPersistRootNode(this.node)):(this.destroy(),console.warn("Only one instance of ColorProvider is allowed."))},r.getInstance=function(){return r._instance||console.error("ColorProvider instance is not yet initialized."),r._instance},i.getColor=function(e){switch(e){case 0:return this.color1.clone();case 1:return this.color2.clone();case 2:return this.color3.clone();case 3:return this.color4.clone();case 4:return this.color5.clone();case 5:return this.color6.clone();case 6:return this.ground.clone();case 7:return this.highlight.clone();default:return a.WHITE.clone()}},r.ChangeColor=function(e,r){if(r){var o=r.material;o?o.setProperty("diffuseColor",e):console.error("Material not found on MeshRenderer.")}},r}(u))._instance=null,p=r((f=w).prototype,"color1",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return a.RED.clone()}}),h=r(f.prototype,"color2",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return a.GREEN.clone()}}),d=r(f.prototype,"color3",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return a.BLUE.clone()}}),b=r(f.prototype,"color4",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return a.YELLOW.clone()}}),g=r(f.prototype,"color5",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return a.CYAN.clone()}}),y=r(f.prototype,"color6",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return a.MAGENTA.clone()}}),v=r(f.prototype,"ground",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return a.MAGENTA.clone()}}),C=r(f.prototype,"highlight",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return a.MAGENTA.clone()}}),s=f))||s);i._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GridManager.ts","./TileSelectionHandler.ts","./TilePlacementHandler.ts","./SelectableManager.ts","./NeighborHandler.ts","./StackHandler.ts","./TaskQueue.ts"],(function(e){"use strict";var n,t,r,a,i,c,l,s,o,u,p,f,h,d,g,m,b;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,a=e.assertThisInitialized,i=e.asyncToGenerator,c=e.regeneratorRuntime,l=e.createForOfIteratorHelperLoose},function(e){s=e.cclegacy,o=e._decorator,u=e.Component},function(e){p=e.GridManager},function(e){f=e.TileSelectionHandler},function(e){h=e.TilePlacementHandler},function(e){d=e.SelectableManager},function(e){g=e.NeighborHandler},function(e){m=e.StackHandler},function(e){b=e.TaskQueue}],execute:function(){var v,H,k,M,T,y,w;s._RF.push({},"b58ffCmt59Jj52WP/DfJFRl","GameManager",void 0);var P=o.ccclass,x=o.property;e("GameManager",(v=P("GameManager"),H=x(p),k=x(d),v((y=n((T=function(e){function n(){for(var n,t=arguments.length,i=new Array(t),c=0;c<t;c++)i[c]=arguments[c];return n=e.call.apply(e,[this].concat(i))||this,r(n,"gridManager",y,a(n)),r(n,"selectableManager",w,a(n)),n.taskQueue=new b,n.MATCH_STACK_COUNT=7,n.tilePlacementHandler=null,n.neighborHandler=null,n.stackHandler=null,n}t(n,e);var s=n.prototype;return s.onLoad=function(){this.neighborHandler=new g,this.tilePlacementHandler=new h,this.stackHandler=new m(this.MATCH_STACK_COUNT),this.selectableManager&&this.selectableManager.init(),f.placementEvent.on("placement",this.onPlacementTriggered,this)},s.onDestroy=function(){f.placementEvent.off("placement",this.onPlacementTriggered,this)},s.onPlacementTriggered=function(){var e=i(c().mark((function e(n){var t,r=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=function(){var e=i(c().mark((function e(){var t,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null==(t=r.tilePlacementHandler)?void 0:t.place(n,r.selectableManager);case 2:if(!(a=e.sent)){e.next=7;break}return a.highlight(!1),e.next=7,r.processPlacement(a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),this.taskQueue.add(t);case 2:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}(),s.processPlacement=function(){var e=i(c().mark((function e(n){var t,r,a,i,s,o,u,p,f,h;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[n];case 1:if(!(t.length>0)){e.next=19;break}if((r=t.shift())&&r.tryLock()){e.next=5;break}return e.abrupt("continue",1);case 5:return e.prev=5,e.next=8,null==(a=this.neighborHandler)?void 0:a.processNeighbors(r);case 8:return s=e.sent,e.next=11,null==(i=this.stackHandler)?void 0:i.processStacks(s);case 11:for(o=e.sent,u=new Set([].concat(s,o)),p=l(u);!(f=p()).done;)h=f.value,t.includes(h)||t.push(h);case 14:return e.prev=14,r.unlock(),e.finish(14);case 17:e.next=1;break;case 19:case"end":return e.stop()}}),e,this,[[5,,14,17]])})));return function(n){return e.apply(this,arguments)}}(),n}(u)).prototype,"gridManager",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=n(T.prototype,"selectableManager",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=T))||M));s._RF.pop()}}}));

System.register("chunks:///_virtual/GridGenerator.ts",["cc","./GroundTile.ts","./TileCluster.ts"],(function(e){"use strict";var t,r,i,n,o,s;return{setters:[function(e){t=e.cclegacy,r=e._decorator,i=e.Vec3,n=e.instantiate},function(e){o=e.GroundTile},function(e){s=e.TileCluster}],execute:function(){var a;t._RF.push({},"2e8acHRb/9JQoMu7JT2TGDj","GridGenerator",void 0);var u=r.ccclass;r.property,e("GridGenerator",u("GridGenerator")(a=function(){function e(e,t,r){this.groundTilePrefab=void 0,this.tileClusterPrefab=void 0,this.tileSize=void 0,this.groundTilePrefab=e,this.tileClusterPrefab=t,this.tileSize=r}var t=e.prototype;return t.generateGrid=function(e,t){for(var r=[],n=e.length,s=e[0].length,a=this.tileSize+-.08,u=this.tileSize+.04,l=(s-1)*a*.5,c=(n-1)*u*.5,d=0;d<n;d++){r[d]=[];for(var f=0;f<s;f++){var h=e[d][f];if(-1!==h){var v=new i(f*a-l,0,(f%2==0?-.5:0)-(d*u-c)),G=this.createGroundTile(v,t),p=G.getComponent(o);p&&(p.gridPosition={row:d,col:f},r[d][f]=p,h>0&&this.createLevelCluster(h,G,p))}}}return r},t.createGroundTile=function(e,t){var r=n(this.groundTilePrefab);return r.parent=t,r.setPosition(e),r},t.createLevelCluster=function(e,t,r){var o=n(this.tileClusterPrefab).getComponent(s);o&&(o.initCluster(e,3),o.node.setPosition(new i(t.position.x,.1,t.position.z)),o.node.setParent(t.parent),o.attachedGround=r,r.attachedClusters.push(o),r.setActiveCollider(!1),r.isPlacedGround=!0)},e}())||a);t._RF.pop()}}}));

System.register("chunks:///_virtual/GridManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GridGenerator.ts","./SingletonComponent.ts"],(function(r){"use strict";var e,i,t,n,o,a,l,u,c,s;return{setters:[function(r){e=r.applyDecoratedDescriptor,i=r.inheritsLoose,t=r.initializerDefineProperty,n=r.assertThisInitialized},function(r){o=r.cclegacy,a=r._decorator,l=r.Prefab,u=r.Node},function(r){c=r.GridGenerator},function(r){s=r.SingletonComponent}],execute:function(){var d,f,g,h,p,b,y,G,z,P;o._RF.push({},"fcfc7R8o51MhpTFydI/hHkU","GridManager",void 0);var m=a.ccclass,v=a.property;r("GridManager",(d=m("GridManager"),f=v({type:l}),g=v({type:l}),h=v(u),d((y=e((b=function(r){function e(){for(var e,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return e=r.call.apply(r,[this].concat(o))||this,t(e,"groundTilePrefab",y,n(e)),t(e,"tileClusterPrefab",G,n(e)),t(e,"gridArea",z,n(e)),t(e,"tileSize",P,n(e)),e.grid=[],e.gridGenerator=null,e}i(e,r);var o=e.prototype;return o.onLoad=function(){r.prototype.onLoad.call(this),this.gridGenerator=new c(this.groundTilePrefab,this.tileClusterPrefab,this.tileSize)},o.setGrid=function(r){this.grid=this.gridGenerator.generateGrid(r,this.gridArea)},o.getGrid=function(){return this.grid},o.getGroundTile=function(r,e){return this.grid[r]&&this.grid[r][e]?this.grid[r][e]:null},o.resetGrid=function(){this.grid.forEach((function(r){r.forEach((function(r){r.node&&r.node.destroy()}))})),this.grid=[]},o.resetHighlight=function(){this.grid.forEach((function(r){r.forEach((function(r){r.node&&r.highlight(!1)}))}))},e}(s)).prototype,"groundTilePrefab",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(b.prototype,"tileClusterPrefab",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(b.prototype,"gridArea",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(b.prototype,"tileSize",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),p=b))||p));o._RF.pop()}}}));

System.register("chunks:///_virtual/GroundTile.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ColorProvider.ts","./LockableComponent.ts"],(function(t){"use strict";var e,o,n,r,l,i,s,h;return{setters:[function(t){e=t.inheritsLoose,o=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy,r=t._decorator,l=t.MeshRenderer,i=t.Collider},function(t){s=t.ColorProvider},function(t){h=t.LockableComponent}],execute:function(){var a;n._RF.push({},"961dfMp4KdCgb4pdQv1aabD","GroundTile",void 0);var u=r.ccclass;r.property,t("GroundTile",u("GroundTile")(a=function(t){function n(){for(var e,o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))||this).gridPosition={row:0,col:0},e.attachedClusters=[],e.mesh=void 0,e.isPlacedGround=!1,e.defaultColor=null,e.highlightColor=null,e}e(n,t);var r=n.prototype;return r.onLoad=function(){this.mesh=this.node.getComponentInChildren(l),this.highlightColor=s.getInstance().getColor(7),this.defaultColor=s.getInstance().getColor(6),this.highlight(!1)},r.addTileCluster=function(t){this.attachedClusters.push(t);var e=t.node.worldPosition.clone();t.node.parent=this.node.parent,t.node.setPosition(e)},r.setActiveCollider=function(t){this.node.getComponent(i).enabled=t},r.getLastCluster=function(){return 0===this.attachedClusters.length?null:this.attachedClusters[this.attachedClusters.length-1]},r.placeSelectableTile=function(t,e){for(var n,r=o(t.tileClusters);!(n=r()).done;){var l=n.value;this.addTileCluster(l),l.place(this)}t.node.removeFromParent()},r.popTileCluster=function(){this.attachedClusters.pop();0===this.attachedClusters.length&&this.setActiveCollider(!0)},r.highlight=function(t){t?s.ChangeColor(this.highlightColor,this.mesh):s.ChangeColor(this.defaultColor,this.mesh)},r.getAllTileCount=function(){return this.attachedClusters.reduce((function(t,e){return t+e.getTiles().length}),0)},n}(h))||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/InputProvider.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){"use strict";var t,e,o,r,i,a,c,s,u,l,h,p;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,o=n.initializerDefineProperty,r=n.assertThisInitialized},function(n){i=n.cclegacy,a=n._decorator,c=n.Camera,s=n.geometry,u=n.input,l=n.Input,h=n.PhysicsSystem,p=n.Component}],execute:function(){var T,d,v,y,f;i._RF.push({},"8e1a0VpabNCnJ9W7RMADA79","InputProvider",void 0);var m=a.ccclass,C=a.property;n("InputProvider",(T=m("InputProvider"),d=C(c),T((f=t((y=function(n){function t(){for(var t,e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return t=n.call.apply(n,[this].concat(i))||this,o(t,"cameraCom",f,r(t)),t.onTouchStart=null,t.onTouchMove=null,t.onTouchEnd=null,t._ray=new s.Ray,t}e(t,n);var i=t.prototype;return i.onLoad=function(){u.on(l.EventType.TOUCH_START,this.handleTouchStart,this),u.on(l.EventType.TOUCH_MOVE,this.handleTouchMove,this),u.on(l.EventType.TOUCH_END,this.handleTouchEnd,this),this.cameraCom||console.error("Camera component is not assigned in InputProvider.")},i.onDestroy=function(){u.off(l.EventType.TOUCH_START,this.handleTouchStart,this),u.off(l.EventType.TOUCH_MOVE,this.handleTouchMove,this),u.off(l.EventType.TOUCH_END,this.handleTouchEnd,this)},i.handleTouchStart=function(n){var t;null==(t=this.onTouchStart)||t.call(this,n)},i.handleTouchMove=function(n){var t;null==(t=this.onTouchMove)||t.call(this,n)},i.handleTouchEnd=function(n){var t;null==(t=this.onTouchEnd)||t.call(this,n)},i.performRaycast=function(n){if(!this.cameraCom)return console.error("Camera component not assigned in InputProvider"),null;if(this.cameraCom.screenPointToRay(n.x,n.y,this._ray),h.instance.raycast(this._ray)){var t=h.instance.raycastResults;if(t.length>0)return t[0].collider.node}return null},t}(p)).prototype,"cameraCom",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=y))||v));i._RF.pop()}}}));

System.register("chunks:///_virtual/level.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,n,l;return{setters:[function(e){t=e.inheritsLoose},function(e){r=e.cclegacy,n=e._decorator,l=e.Component}],execute:function(){var o;r._RF.push({},"ff990/aKEdN27DtwgERvv2f","level",void 0);var c=n.ccclass;e("Level",c("Level")(o=function(e){function r(){for(var t,r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(t=e.call.apply(e,[this].concat(n))||this).levelData={level_1:{matrix:[[0,0,0,0,0],[0,1,0,0,0],[0,0,1,0,0],[0,1,0,0,0],[0,0,0,0,0]]}},t}return t(r,e),r.prototype.getLevelMatrix=function(e){var t=this.levelData[e];return t?t.matrix:(console.error("Level "+e+" not found"),null)},r}(l))||o);r._RF.pop()}}}));

System.register("chunks:///_virtual/LevelManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GridManager.ts","./level.ts"],(function(e){"use strict";var r,n,t,a,i,l,o,c,s;return{setters:[function(e){r=e.applyDecoratedDescriptor,n=e.inheritsLoose,t=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){i=e.cclegacy,l=e._decorator,o=e.Component},function(e){c=e.GridManager},function(e){s=e.Level}],execute:function(){var u,v,g,p,d;i._RF.push({},"f8055cWfd1J3YumOJBvwbOV","LevelManager",void 0);var f=l.ccclass,L=l.property;e("LevelManager",(u=f("LevelManager"),v=L(c),u((d=r((p=function(e){function r(){for(var r,n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return r=e.call.apply(e,[this].concat(i))||this,t(r,"gridManager",d,a(r)),r.level=new s,r}n(r,e);var i=r.prototype;return i.onLoad=function(){this.loadLevel("level_1")},i.loadLevel=function(e){var r=this.level.getLevelMatrix(e);r?this.gridManager.setGrid(r):console.error("Level "+e+" not found in level data")},r}(o)).prototype,"gridManager",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=p))||g));i._RF.pop()}}}));

System.register("chunks:///_virtual/LockableComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ColorProvider.ts"],(function(o){"use strict";var e,n,t,c,i,r,s;return{setters:[function(o){e=o.inheritsLoose,n=o.createClass},function(o){t=o.cclegacy,c=o._decorator,i=o.MeshRenderer,r=o.Component},function(o){s=o.ColorProvider}],execute:function(){var l;t._RF.push({},"92d0a5d6NdMZYUlrIB5kaQA","LockableComponent",void 0);var u=c.ccclass;o("LockableComponent",u("LockableComponent")(l=function(o){function t(){for(var e,n=arguments.length,t=new Array(n),c=0;c<n;c++)t[c]=arguments[c];return(e=o.call.apply(o,[this].concat(t))||this)._isLocked=!1,e._lockTimeout=void 0,e}e(t,o);var c=t.prototype;return c.lock=function(){var o=this;this._isLocked||(this._isLocked=!0,this._lockTimeout=setTimeout((function(){console.warn(o.node.name+" lock timeout! Unlocking."),o.unlock()}),5e3))},c.unlock=function(){this._isLocked&&(this._isLocked=!1,this._lockTimeout&&(clearTimeout(this._lockTimeout),this._lockTimeout=null))},c.tryLock=function(){return!this._isLocked&&(this.lock(),!0)},c.changeColor=function(o){var e=this.node.getComponentInChildren(i);e?s.ChangeColor(o,e):console.error("MeshRenderer not found on node "+this.node.name+".")},n(t,[{key:"isLocked",get:function(){return this._isLocked}}]),t}(r))||l);t._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./level.ts","./BodyGroups.ts","./ColorProvider.ts","./GridGenerator.ts","./NeighborChecker.ts","./Sounds.ts","./TaskQueue.ts","./TileCluster.ts","./AreaBackground.ts","./GroundTile.ts","./SelectableTiles.ts","./Tile.ts","./CollisionHandler.ts","./NeighborHandler.ts","./StackHandler.ts","./TilePlacementHandler.ts","./TileSelectionHandler.ts","./TileTransferHandler.ts","./LockableComponent.ts","./Promises.ts","./SingletonComponent.ts","./TileAnimator.ts","./InputProvider.ts","./GameManager.ts","./GridManager.ts","./LevelManager.ts","./ScoreManager.ts","./SelectableManager.ts","./SoundManager.ts","./test.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/NeighborChecker.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GridManager.ts"],(function(e){"use strict";var r,t,o,n,i,s;return{setters:[function(e){r=e.asyncToGenerator,t=e.regeneratorRuntime,o=e.createForOfIteratorHelperLoose},function(e){n=e.cclegacy,i=e._decorator},function(e){s=e.GridManager}],execute:function(){var u;n._RF.push({},"bb245R1IldJi7kQQ0fjMLOS","NeighborChecker",void 0);var c=i.ccclass;i.property,e("NeighborChecker",c("NeighborChecker")(u=function(){function e(){this.evenColmDirections=[{dRow:-1,dCol:0},{dRow:1,dCol:0},{dRow:0,dCol:-1},{dRow:0,dCol:1},{dRow:1,dCol:-1},{dRow:1,dCol:1}],this.oddColmDirections=[{dRow:-1,dCol:0},{dRow:1,dCol:0},{dRow:0,dCol:-1},{dRow:0,dCol:1},{dRow:-1,dCol:-1},{dRow:-1,dCol:1}]}var n=e.prototype;return n.findNeighbors=function(){var e=r(t().mark((function e(r){var n,i,u,c,a,d,l,p,h,f,C,g,w;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=[],i=r.gridPosition,u=i.row,c=i.col,a=c%2==0?this.evenColmDirections:this.oddColmDirections,d=o(a);!(l=d()).done;)p=l.value,h=p.dRow,f=p.dCol,C=u+h,g=c+f,(w=s.getInstance().getGroundTile(C,g))&&!w.isLocked&&w.getLastCluster()&&n.push(w);return e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}(),n.findAllMatches=function(){var e=r(t().mark((function e(r){var n,i,s,u,c,a,d;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.getLastCluster()){e.next=3;break}return e.abrupt("return",[]);case 3:return e.next=5,this.findNeighbors(r);case 5:for(i=e.sent,s=[],u=o(i);!(c=u()).done;)d=c.value,(null==(a=d.getLastCluster())?void 0:a.type)===n.type&&s.push(d);return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}(),e}())||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/NeighborHandler.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NeighborChecker.ts","./TileTransferHandler.ts"],(function(e){"use strict";var r,t,n,a,s,c,o;return{setters:[function(e){r=e.asyncToGenerator,t=e.regeneratorRuntime,n=e.createForOfIteratorHelperLoose},function(e){a=e.cclegacy,s=e._decorator},function(e){c=e.NeighborChecker},function(e){o=e.TileTransferHandler}],execute:function(){var u;a._RF.push({},"e4aebHL+rpIgbQ+OJGYDdFz","NeighborHandler",void 0);var i=s.ccclass;e("NeighborHandler",i("NeighborHandler")(u=function(){function e(){this.neighborChecker=null,this.transferHandler=null,this.neighborChecker=new c,this.transferHandler=new o}var a=e.prototype;return a.processNeighbors=function(){var e=r(t().mark((function e(r){var a,s,c,o,u,i,l,h,f,g,d,b,p,k;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=[],e.next=3,null==(a=this.neighborChecker)?void 0:a.findAllMatches(r);case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0=[];case 6:if(!((c=e.t0).length>0)){e.next=32;break}if(!(c.length>1)){e.next=20;break}o=n(c);case 10:if((u=o()).done){e.next=17;break}return l=u.value,s.push(l),e.next=15,null==(i=this.transferHandler)?void 0:i.transferClusterToTarget(l,r);case 15:e.next=10;break;case 17:s.push(r),e.next=25;break;case 20:return f=this.determineTransferTargets(r,c[0]),g=f.source,d=f.target,s.push(g),s.push(d),e.next=25,null==(h=this.transferHandler)?void 0:h.transferClusterToTarget(g,d);case 25:b=n(s);case 26:if((p=b()).done){e.next=32;break}return k=p.value,e.next=30,this.processNeighbors(k);case 30:e.next=26;break;case 32:return e.abrupt("return",s);case 33:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}(),a.determineTransferTargets=function(e,r){var t=e.attachedClusters.length,n=r.attachedClusters.length;return 1===t&&n>1?{source:r,target:e}:1===n&&t>1?{source:e,target:r}:t<n?{source:r,target:e}:n<t?{source:e,target:r}:{source:r,target:e}},e}())||u);a._RF.pop()}}}));

System.register("chunks:///_virtual/Promises.ts",["cc"],(function(e){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){e("sleep",(function(e){return new Promise((function(t){return setTimeout(t,e)}))})),t._RF.push({},"3f508ilafpHeYeGzzs1QuOm","Promises",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/ScoreManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var n,t,o,r,i,c,s,a,l,u,p,d;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,o=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){i=e.cclegacy,c=e._decorator,s=e.Node,a=e.director,l=e.RichText,u=e.Vec3,p=e.tween,d=e.Component}],execute:function(){var h,f,y,g,_,v;i._RF.push({},"67641kfZOFGm4rz+RLRpBCY","ScoreManager",void 0);var m=c.ccclass,w=c.property;e("ScoreManager",(h=m("ScoreManager"),f=w(s),h(((v=function(e){function n(){for(var n,t=arguments.length,i=new Array(t),c=0;c<t;c++)i[c]=arguments[c];return n=e.call.apply(e,[this].concat(i))||this,o(n,"score",_,r(n)),n.m_score=0,n}t(n,e);var i=n.prototype;return i.onLoad=function(){null===n._instance?(n._instance=this,a.addPersistRootNode(this.node)):(this.destroy(),console.warn("Only one instance of ScoreManager is allowed."))},n.getInstance=function(){return n._instance||console.error("ScoreManager instance is not yet initialized."),n._instance},i.start=function(){this.updateText()},i.updateText=function(){this.score.getComponentInChildren(l).string="<color=#00000>"+this.m_score+"</color>"},i.addScore=function(e){this.shakeUI(this.score),this.m_score+=e,this.updateText()},i.shakeUI=function(e,n,t){var o;void 0===n&&(n=3),void 0===t&&(t=.3);var r=e.position.clone(),i=[new u(r.x-n,r.y),new u(r.x+n,r.y),new u(r.x,r.y+n),new u(r.x,r.y-n),r],c=t/i.length,s=i.map((function(e){return p().to(c,{position:e})}));(o=p(e)).sequence.apply(o,s).call((function(){return e.setPosition(r)})).start()},n}(d))._instance=null,_=n((g=v).prototype,"score",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=g))||y));i._RF.pop()}}}));

System.register("chunks:///_virtual/SelectableManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TileCluster.ts","./SelectableTiles.ts"],(function(e){"use strict";var t,n,r,i,a,s,l,o,c,u,f,p,h,b,d,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized,a=e.asyncToGenerator,s=e.regeneratorRuntime},function(e){l=e.cclegacy,o=e._decorator,c=e.Prefab,u=e.Node,f=e.Component,p=e.instantiate,h=e.Vec3,b=e.tween},function(e){d=e.TileCluster},function(e){m=e.SelectableTiles}],execute:function(){var g,v,T,w,y,x,P,C,M;l._RF.push({},"57701WxVB1At5p9WMflyLji","SelectableManager",void 0);var S=o.ccclass,k=o.property;e("SelectableManager",(g=S("SelectableManager"),v=k(c),T=k(c),w=k(u),g((P=t((x=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return t=e.call.apply(e,[this].concat(a))||this,r(t,"selectableTilesPrefab",P,i(t)),r(t,"tileClusterPrefab",C,i(t)),r(t,"selectableArea",M,i(t)),t.tilesCount=3,t.selectableTiles=[],t}n(t,e);var l=t.prototype;return l.init=function(){var e=a(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.createSelectableTiles();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),l.createSelectableTiles=function(){var e=a(s().mark((function e(){var t,n,r,i,a,l,o,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=-(this.tilesCount-1),n=15,r=2,i=0;case 4:if(!(i<this.tilesCount)){e.next=22;break}if((a=p(this.selectableTilesPrefab)).parent=this.selectableArea,l=new h(t+i*r,0,0),a.setPosition(l),!(o=a.getComponent(m))){e.next=19;break}return c=a.getWorldPosition().clone(),o.originalPosition=c,a.setPosition(a.getPosition().clone().add3f(n-l.x,0,0)),e.next=16,this.addRandomClusters(o);case 16:return this.selectableTiles.push(o),e.next=19,this.enterTheSceneAnimation(a,l);case 19:i++,e.next=4;break;case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),l.addRandomClusters=function(){var e=a(s().mark((function e(t){var n,r,i,a,l,o,c,u,f;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(1===(n=Math.floor(3*Math.random())+1)&&(n=2),r=[1,2,3,4,5],i=1,a=0;a<n;a++)l=Math.floor(Math.random()*r.length),o=r.splice(l,1)[0],c=Math.floor(3*Math.random())+1,(u=p(this.tileClusterPrefab)).parent=t.node,(f=u.getComponent(d))&&(f.initCluster(o,c),t.tileClusters.push(f),f.node.setPosition(0,.1*i,-.05*a)),i+=c;case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),l.remove=function(e){var t=this.selectableTiles.indexOf(e);-1!==t&&(this.selectableTiles.splice(t,1),e.node.destroy()),0===this.selectableTiles.length&&this.createSelectableTiles()},l.enterTheSceneAnimation=function(){var e=a(s().mark((function e(t,n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){b(t).to(1,{position:n},{easing:"expoInOut"}).call(e).start()}));case 2:return e.next=4,new Promise((function(e){b(t).to(.1,{scale:new h(1.2,1.2,1.2)}).to(.1,{scale:new h(1,1,1)}).call(e).start()}));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),t}(f)).prototype,"selectableTilesPrefab",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(x.prototype,"tileClusterPrefab",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(x.prototype,"selectableArea",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=x))||y));l._RF.pop()}}}));

System.register("chunks:///_virtual/SelectableTiles.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,i,o,s,l,n,r;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy,o=e._decorator,s=e.BoxCollider,l=e.tween,n=e.Vec3,r=e.Component}],execute:function(){var d;i._RF.push({},"ff07fjRrp9FyJVPyHi8Rb2x","SelectableTiles",void 0);var c=o.ccclass;o.property,e("SelectableTiles",c("SelectableTiles")(d=function(e){function i(){for(var t,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return(t=e.call.apply(e,[this].concat(o))||this).tileClusters=[],t.isSelected=!1,t.isSelectable=!0,t.isDragging=!1,t.touchOffset=new n,t.originalPosition=new n,t.attachedGround=null,t.idleColliderSize=new n(1,10,1),t.selectedColliderSize=new n(.5,20,.5),t.liftedYOffset=1,t}t(i,e);var o=i.prototype;return o.start=function(){this.setColliderSize(!1)},o.setColliderSize=function(e){this.node.getComponent(s).size=e?this.selectedColliderSize:this.idleColliderSize},o.enableCollider=function(e){this.node.getComponent(s).enabled=e},o.select=function(e){if(this.originalPosition=this.node.getWorldPosition(),this.isSelectable){this.setColliderSize(!0),this.isDragging=!0,this.touchOffset=this.node.getWorldPosition().subtract(e);var t=this.node.getWorldPosition().clone();t.y+=this.liftedYOffset,l(this.node).to(.05,{worldPosition:t}).start()}},o.testCollider=function(e){var t=this.node.getChildByName("Test");t.scale=e?this.selectedColliderSize:this.idleColliderSize},o.move=function(e){if(this.isDragging){var t=e.add(this.touchOffset);t.y+=this.liftedYOffset,this.node.setWorldPosition(t)}},o.deselect=function(){this.setColliderSize(!1),this.isDragging=!1,l(this.node).to(.05,{worldPosition:this.originalPosition}).start()},o.resetPosition=function(){var e=this;this.enableCollider(!1),l(this.node).to(.1,{worldPosition:this.originalPosition}).call((function(){return e.enableCollider(!0)})).start()},o.grounded=function(){this.node.setWorldPosition(new n(this.attachedGround.node.worldPosition.x,.1,this.attachedGround.node.worldPosition.z))},o.getLastCluster=function(){return 0===this.tileClusters.length?null:this.tileClusters[this.tileClusters.length-1]},i}(r))||d);i._RF.pop()}}}));

System.register("chunks:///_virtual/SingletonComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var n,e,s,o,i;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,s=t._decorator,o=t.director,i=t.Component}],execute:function(){var r,c;e._RF.push({},"f0d21ygJLxDGrpQsTsXwZwT","SingletonComponent",void 0);s.ccclass,s.property;var a=s.disallowMultiple;t("SingletonComponent",a(((c=function(t){function e(){return t.apply(this,arguments)||this}return n(e,t),e.prototype.onLoad=function(){var t=e.instances.get(this.constructor);if(t){if(t!==this)return void console.warn("Another instance of "+this.constructor.name+" was attempted to be created and was destroyed.")}else e.instances.set(this.constructor,this),o.addPersistRootNode(this.node)},e.getInstance=function(){var t=e.instances.get(this);return t||(t=new this,e.instances.set(this,t)),t},e}(i)).instances=new Map,r=c))||r);e._RF.pop()}}}));

System.register("chunks:///_virtual/SoundManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SingletonComponent.ts"],(function(n){"use strict";var o,t,e,i,a,s,r,u;return{setters:[function(n){o=n.applyDecoratedDescriptor,t=n.inheritsLoose,e=n.initializerDefineProperty,i=n.assertThisInitialized},function(n){a=n.cclegacy,s=n._decorator,r=n.AudioSource},function(n){u=n.SingletonComponent}],execute:function(){var c,p,l,d,f;a._RF.push({},"671fcTPnPJFU5NZIT6SAMNH","SoundManager",void 0);var h=s.ccclass,g=s.property;n("SoundManager",(c=h("SoundManager"),p=g({type:r}),c((f=o((d=function(n){function o(){for(var o,t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];return o=n.call.apply(n,[this].concat(a))||this,e(o,"soundList",f,i(o)),o.soundsMap=new Map,o.audioSource=null,o}t(o,n);var a=o.prototype;return a.onLoad=function(){var o=this;n.prototype.onLoad.call(this),this.soundList.forEach((function(n){var t=o.node.addComponent(r);t=n,o.soundsMap.set(n.name,t)}))},a.playSound=function(n,o){void 0===o&&(o=!1);var t=this.soundsMap.get(n);t&&(t.loop=o,t.play())},a.stopSound=function(n){var o=this.soundsMap.get(n);o&&o.playing&&o.stop()},a.setVolume=function(n,o){var t=this.soundsMap.get(n);t&&(t.volume=o)},a.setGlobalVolume=function(n){this.soundsMap.forEach((function(o){o.volume=n}))},a.stopAllSounds=function(){this.soundsMap.forEach((function(n){n.playing&&n.stop()}))},o}(u)).prototype,"soundList",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),l=d))||l));a._RF.pop()}}}));

System.register("chunks:///_virtual/Sounds.ts",["cc"],(function(e){"use strict";var c;return{setters:[function(e){c=e.cclegacy}],execute:function(){var s;e("Sounds",void 0),c._RF.push({},"57862JA1yxEBoTkiE/fKbEg","Sounds",void 0),function(e){e.PickUpSelectables="PickUpSelectable<AudioSource>",e.TransferTiles="TransferTiles<AudioSource>"}(s||(s=e("Sounds",{}))),c._RF.pop()}}}));

System.register("chunks:///_virtual/StackHandler.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TileAnimator.ts"],(function(e){"use strict";var t,r,n,a,c,o;return{setters:[function(e){t=e.asyncToGenerator,r=e.regeneratorRuntime,n=e.createForOfIteratorHelperLoose},function(e){a=e.cclegacy,c=e._decorator},function(e){o=e.TileAnimator}],execute:function(){var s;a._RF.push({},"ed4dayURg1Pd5QwlqVj5V/1","StackHandler",void 0);var u=c.ccclass;e("StackHandler",u("StackHandler")(s=function(){function e(e){void 0===e&&(e=5),this.matchStackCount=0,this.matchStackCount=e}return e.prototype.processStacks=function(){var e=t(r().mark((function e(t){var a,c,s,u,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],c=n(t);case 2:if((s=c()).done){e.next=19;break}if((u=s.value).tryLock()){e.next=6;break}return e.abrupt("continue",17);case 6:if(e.prev=6,!(i=u.getLastCluster())){e.next=14;break}if(!(i.getLength()>=this.matchStackCount)){e.next=14;break}return e.next=12,o.animateTilesToZeroScale(i.getTiles());case 12:u.popTileCluster(),a.push(u);case 14:return e.prev=14,u.unlock(),e.finish(14);case 17:e.next=2;break;case 19:return e.abrupt("return",a);case 20:case"end":return e.stop()}}),e,this,[[6,,14,17]])})));return function(t){return e.apply(this,arguments)}}(),e}())||s);a._RF.pop()}}}));

System.register("chunks:///_virtual/TaskQueue.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,s,r;return{setters:[function(e){t=e.asyncToGenerator,s=e.regeneratorRuntime},function(e){r=e.cclegacy}],execute:function(){r._RF.push({},"3d1fa2rXf5FlrRboWPqWFGg","TaskQueue",void 0);e("TaskQueue",function(){function e(){this.tasks=[],this.isProcessing=!1}var r=e.prototype;return r.add=function(){var e=t(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.tasks.push(t),this.isProcessing){e.next=4;break}return e.next=4,this.processQueue();case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),r.processQueue=function(){var e=t(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.isProcessing=!0;case 1:if(!(this.tasks.length>0)){e.next=8;break}if(!(t=this.tasks.shift())){e.next=6;break}return e.next=6,t();case 6:e.next=1;break;case 8:this.isProcessing=!1;case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/test.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,n,r,o,i,c,s,u,a;return{setters:[function(t){e=t.inheritsLoose,n=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){o=t.cclegacy,i=t._decorator,c=t.Vec3,s=t.Component,u=t.Quat,a=t.tween}],execute:function(){var p;o._RF.push({},"8c091C75ypOvazE3hAi1j/K","test",void 0);var l=i.ccclass;i.property,t("test",l("test")(p=function(t){function o(){return t.apply(this,arguments)||this}e(o,t);var i=o.prototype;return i.flipTile=function(){var t=n(r().mark((function t(e,n,o){var i,s,p,l,f;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=.2,s=u.fromEuler(new u,90,0,0),p=u.fromEuler(new u,180,0,0),l=new c((n.x+o.x)/2,n.y+.5,(n.z+o.z)/2),f=new Promise((function(t){a(e).sequence(a(e).parallel(a(e).to(i,{position:l},{easing:"cubicInOut"}),a(e).to(i,{rotation:s},{easing:"cubicInOut"})),a(e).parallel(a(e).to(i,{position:o},{easing:"cubicInOut"}),a(e).to(i,{rotation:p},{easing:"cubicInOut"}))).call((function(){return t()})).start()})),t.next=7,f;case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),i.start=function(){var t=this.node,e=this.node.position,n=new c(e.x,e.y,e.z);this.flipTile(t,e,n)},o}(s))||p);o._RF.pop()}}}));

System.register("chunks:///_virtual/Tile.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ColorProvider.ts"],(function(e){"use strict";var t,r,o,i,n,s,l,c,a,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized,n=e.createForOfIteratorHelperLoose},function(e){s=e.cclegacy,l=e._decorator,c=e.MeshRenderer,a=e.Component},function(e){p=e.ColorProvider}],execute:function(){var u,h,f;s._RF.push({},"00639mmxnRFFrUeB00Dt1F/","Tile",void 0);var d=l.ccclass,v=l.property;e("Tile",d("Tile")((f=t((h=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return t=e.call.apply(e,[this].concat(n))||this,o(t,"type",f,i(t)),t.color=null,t.meshes=void 0,t.temp_other_mesh=void 0,t}return r(t,e),t.prototype.init=function(e){this.type=e,this.meshes=this.node.getComponentsInChildren(c),this.color=p.getInstance().getColor(this.type);for(var t,r=n(this.meshes);!(t=r()).done;){var o=t.value;p.ChangeColor(this.color,o)}},t}(a)).prototype,"type",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),u=h))||u);s._RF.pop()}}}));

System.register("chunks:///_virtual/TileAnimator.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ScoreManager.ts","./SoundManager.ts","./Sounds.ts"],(function(e){"use strict";var n,t,o,r,a,i,u,c,s;return{setters:[function(e){n=e.asyncToGenerator,t=e.regeneratorRuntime},function(e){o=e.cclegacy,r=e.Vec3,a=e.Quat,i=e.tween},function(e){u=e.ScoreManager},function(e){c=e.SoundManager},function(e){s=e.Sounds}],execute:function(){o._RF.push({},"4c760Qqh69H3p8hfypnYsgd","TileAnimator",void 0);e("TileAnimator",function(){function e(){}return e.applyLookAt=function(e,n){var t=new r;r.subtract(t,n,e.worldPosition),t.normalize();var o=new a;a.fromViewUp(o,t),e.setRotation(o)},e.animateClusterTransfer=function(){var e=n(t().mark((function e(n,o){var u,l,f,d,w,p,m,g,R,h=this;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(u=n.getTiles(),l=o.node.worldPosition.clone(),f=o.getAllTileCount(),d=.1*(f+1),.3,.1,.7,w="quartOut",p="quartIn",m=[],u.reverse(),g=function(e){var n=u[e],t=n.node.worldPosition.clone(),o=new r(l.x,d+.1*(e+1),l.z),f=new r((t.x+o.x)/2,Math.max(t.y,o.y)+.7,(t.z+o.z)/2);n.node.setSiblingIndex(e);var g=h.calculateDirection(n.node.worldPosition,o),R=h.getRotationByDirection(g),x=R.midRotation,v=R.endRotation;console.log(g);var y=new Promise((function(t){i(n.node).delay(.1*e).call((function(){c.getInstance().playSound(s.TransferTiles)})).sequence(i(n.node).parallel(i(n.node).to(.15,{worldPosition:f},{easing:p}),i(n.node).to(.15,{rotation:x},{easing:p})),i(n.node).parallel(i(n.node).to(.15,{worldPosition:o},{easing:w}),i(n.node).to(.15,{rotation:v},{easing:w}))).call((function(){n.node.setRotation(a.IDENTITY),t()})).start()}));m.push(y)},R=0;R<u.length;R++)g(R);return e.next=15,Promise.all(m);case 15:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),e.prototype.playSoundSequentially=function(){var e=n(t().mark((function e(n,o){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=0;case 1:if(!(r<n)){e.next=8;break}return c.getInstance().playSound(s.TransferTiles),e.next=5,new Promise((function(e){return setTimeout(e,1e3*o)}));case 5:r++,e.next=1;break;case 8:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),e.calculateDirection=function(e,n){var t=Math.floor(n.x-e.x),o=Math.floor(n.z-e.z);return t>0&&0===o?"LeftUp":t<0&&0===o?"RightUp":t>0&&o<0?"LeftDown":t<0&&o<0?"RightDown":o>0?"Down":"Up"},e.getRotationByDirection=function(e){switch(e){case"Up":return{midRotation:a.fromEuler(new a,-90,0,0),endRotation:a.fromEuler(new a,-180,0,0)};case"Down":return{midRotation:a.fromEuler(new a,90,0,0),endRotation:a.fromEuler(new a,180,0,0)};case"LeftUp":return{midRotation:a.fromEuler(new a,90,45,0),endRotation:a.fromEuler(new a,180,60,0)};case"LeftDown":return{midRotation:a.fromEuler(new a,-90,-45,0),endRotation:a.fromEuler(new a,-180,-60,0)};case"RightUp":return{midRotation:a.fromEuler(new a,0,45,90),endRotation:a.fromEuler(new a,0,60,180)};case"RightDown":return{midRotation:a.fromEuler(new a,0,-45,90),endRotation:a.fromEuler(new a,0,-60,180)};default:return{midRotation:a.fromEuler(new a,0,0,0),endRotation:a.fromEuler(new a,0,0,0)}}},e.animateTilesToZeroScale=function(){var e=n(t().mark((function e(n){var o,a,c,s,l,f,d;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=[].concat(n).reverse(),a=o[o.length-1],c=.1,s=t().mark((function e(n){var a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=o[n],n!==o.length-1){e.next=3;break}return e.abrupt("return","break");case 3:return e.next=5,new Promise((function(e){i(a.node).to(c,{scale:new r(0,0,0)}).call(e).start()}));case 5:case"end":return e.stop()}}),e)})),l=0;case 5:if(!(l<o.length)){e.next=13;break}return e.delegateYield(s(l),"t0",7);case 7:if("break"!==e.t0){e.next=10;break}return e.abrupt("break",13);case 10:l++,e.next=5;break;case 13:return e.next=15,new Promise((function(e){i(a.node).to(c,{scale:new r(.231,.5*a.node.scale.y,.231)}).call(e).start()}));case 15:return f=new r(0,2,2),d=new r(-2.3,7.2,2),e.next=19,new Promise((function(e){i(a.node).to(c,{worldPosition:f},{easing:"cubicOut"}).call(e).start()}));case 19:return e.next=21,new Promise((function(e){i(a.node).to(c,{worldPosition:d},{easing:"expoIn"}).call((function(){a.node.active=!1,u.getInstance().addScore(10),e()})).start()}));case 21:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),e}());o._RF.pop()}}}));

System.register("chunks:///_virtual/TileCluster.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Tile.ts"],(function(t){"use strict";var e,i,n,o,r,s,l,a,u,c,h,f,p,g,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,r=t.asyncToGenerator,s=t.regeneratorRuntime},function(t){l=t.cclegacy,a=t._decorator,u=t.Prefab,c=t.Vec3,h=t.instantiate,f=t.Collider,p=t.tween,g=t.Component},function(t){d=t.Tile}],execute:function(){var P,v,y,b,C,T;l._RF.push({},"4b732WM0WRC/IiWikVPbpKP","TileCluster",void 0);var m=a.ccclass,w=a.property;t("TileCluster",(P=m("TileCluster"),v=w({type:u}),P((C=e((b=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,n(e,"tilePrefab",C,o(e)),n(e,"tileCount",T,o(e)),e.tiles=[],e.touchOffset=new c,e.type=null,e.isSelectable=!0,e.isDragging=!1,e.originalPosition=new c,e.attachedGround=null,e}i(e,t);var l=e.prototype;return l.onLoad=function(){this.originalPosition=this.node.getPosition().clone()},l.initCluster=function(t,e){this.type=t,this.createTiles(e)},l.createTiles=function(t){for(var e=0;e<t;e++){var i=h(this.tilePrefab);i.parent=this.node;var n=new c(0,.13*e,.015*-e);i.setPosition(n);var o=i.getComponent(d);o&&o.init(this.type),this.tiles.push(o)}},l.transferTiles=function(){var t=r(s().mark((function t(e){var i,n,o,r;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(i=e.length,n=0;n<i;n++)o=e.pop(),r=o.node.getWorldPosition(),o.node.removeFromParent(),o.node.setParent(this.node,!0),r.y+=.05,o.node.setWorldPosition(r),this.tiles.push(o);case 2:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),l.setActiveCollider=function(t){this.node.getComponent(f).enabled=t},l.getTiles=function(){return this.tiles},l.getLength=function(){return this.tiles.length},l.select=function(t){this.isSelectable&&(this.isDragging=!0,this.touchOffset=this.node.getWorldPosition().subtract(t))},l.move=function(t){if(this.isDragging){var e=t.add(this.touchOffset);e.y+=.2,this.node.setWorldPosition(e)}},l.deselect=function(){this.isDragging&&(this.isDragging=!1,this.resetPosition())},l.resetPosition=function(){p(this.node).to(.3,{position:this.originalPosition}).start()},l.place=function(t){this.attachedGround=t},e}(g)).prototype,"tilePrefab",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=e(b.prototype,"tileCount",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=b))||y));l._RF.pop()}}}));

System.register("chunks:///_virtual/TilePlacementHandler.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var r,t,n,a,c;return{setters:[function(e){r=e.asyncToGenerator,t=e.regeneratorRuntime,n=e.createForOfIteratorHelperLoose},function(e){a=e.cclegacy,c=e._decorator}],execute:function(){var u;a._RF.push({},"1e150QBfjhPH6aezsWhPuVZ","TilePlacementHandler",void 0);var o=c.ccclass;c.property,e("TilePlacementHandler",o("TilePlacementHandler")(u=function(){function e(){}return e.prototype.place=function(){var e=r(t().mark((function e(r,a){var c,u,o,l;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((c=r.attachedGround)&&r){e.next=3;break}return e.abrupt("return",null);case 3:for(u=n(r.tileClusters);!(o=u()).done;)l=o.value,c.addTileCluster(l);return c.setActiveCollider(!1),c.isPlacedGround=!0,a.remove(r),e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),e}())||u);a._RF.pop()}}}));

System.register("chunks:///_virtual/TileSelectionHandler.ts",["./rollupPluginModLoBabelHelpers.js","cc","./InputProvider.ts","./SelectableTiles.ts"],(function(e){"use strict";var t,i,n,o,r,l,c,s,a,u,d,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,l=e._decorator,c=e.EventTarget,s=e.Vec3,a=e.geometry,u=e.Component},function(e){d=e.InputProvider},function(e){h=e.SelectableTiles}],execute:function(){var p,v,T,f,y,P;r._RF.push({},"d9f70bidhFMHIWkLB7n6IRS","TileSelectionHandler",void 0);var g=l.ccclass,m=l.property;e("TileSelectionHandler",(p=g("TileSelectionHandler"),v=m(d),p(((P=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),l=0;l<i;l++)r[l]=arguments[l];return t=e.call.apply(e,[this].concat(r))||this,n(t,"inputProvider",y,o(t)),t.selectedTile=null,t}i(t,e);var r=t.prototype;return r.onLoad=function(){this.inputProvider?(this.inputProvider.onTouchStart=this.handleTouchStart.bind(this),this.inputProvider.onTouchMove=this.handleTouchMove.bind(this),this.inputProvider.onTouchEnd=this.handleTouchEnd.bind(this)):console.error("InputProvider is not assigned in TileSelectionHandler.")},r.handleTouchStart=function(e){var t=e.getLocation(),i=new s(t.x,t.y,0),n=this.performRaycast(i);if(n){var o=this.getSelectableTileFromNode(n);if(o&&o.isSelectable){var r=this.getTouchWorldPosition(e);o.select(r),this.selectedTile=o}}},r.handleTouchMove=function(e){if(this.selectedTile){var t=this.getTouchWorldPosition(e);this.selectedTile.move(t)}},r.handleTouchEnd=function(e){this.selectedTile&&(this.selectedTile.attachedGround?(this.selectedTile.grounded(),t.placementEvent.emit("placement",this.selectedTile)):this.selectedTile.deselect(),this.selectedTile=null)},r.getSelectableTileFromNode=function(e){for(var t=e;t;){var i=t.getComponent(h);if(i)return i;t=t.parent}return null},r.performRaycast=function(e){return this.inputProvider?this.inputProvider.performRaycast(e):null},r.getTouchWorldPosition=function(e){var t=this.inputProvider.cameraCom,i=e.getLocation(),n=new a.Ray;t.screenPointToRay(i.x,i.y,n);var o=(0-n.o.y)/n.d.y;return new s(n.o.x+n.d.x*o,0,n.o.z+n.d.z*o)},t}(u)).placementEvent=new c,y=t((f=P).prototype,"inputProvider",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=f))||T));r._RF.pop()}}}));

System.register("chunks:///_virtual/TileTransferHandler.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TileAnimator.ts"],(function(e){"use strict";var r,t,n,a,s;return{setters:[function(e){r=e.asyncToGenerator,t=e.regeneratorRuntime},function(e){n=e.cclegacy,a=e._decorator},function(e){s=e.TileAnimator}],execute:function(){var u;n._RF.push({},"ac40f5hYx9DH6uLhRzgjGuy","TileTransferHandler",void 0);var c=a.ccclass;e("TileTransferHandler",c("TileTransferHandler")(u=function(){function e(){}return e.prototype.transferClusterToTarget=function(){var e=r(t().mark((function e(r,n){var a,u,c;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r&&n){e.next=2;break}return e.abrupt("return");case 2:if(a=r.getLastCluster()){e.next=5;break}return e.abrupt("return");case 5:if(r.tryLock()||console.warn("Cluster is already locked. Skipping transfer."),e.prev=6,!n){e.next=18;break}return n.tryLock(),e.next=11,s.animateClusterTransfer(a,n);case 11:if(u=n.getLastCluster(),c=[].concat(a.getTiles()).reverse(),!u){e.next=16;break}return e.next=16,u.transferTiles(c);case 16:e.next=19;break;case 18:console.warn("No lastAttachedCluster found on targetGround. Skipping transferTiles.");case 19:r.popTileCluster();case 20:return e.prev=20,n.unlock(),r.unlock(),e.finish(20);case 24:case"end":return e.stop()}}),e,null,[[6,,20,24]])})));return function(r,t){return e.apply(this,arguments)}}(),e}())||u);n._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});